{% load tree_tags %}
<!DOCTYPE html>
<html>
<head>
    <title>Airport Route Dashboard</title>
</head>
<body>

    <h2>Airport Route Dashboard</h2>

    <!--  Search Form for Last Reachable Node -->
    <h3>Find Last Reachable Airport </h3>

    <form method="POST">
        {% csrf_token %}
        <label>Select Airport:</label><br>
        {{ searchForm.airport }}<br><br>

        <label>Select Direction:</label><br>
        {{ searchForm.direction }}<br><br>

        <button type="submit">Search Last Node</button>
    </form>

    <!-- Display Last Reachable Result -->
    {% if last_node %}
        <h4>Last Reachable Airport: {{ last_node.airport_code }}</h4>
    {% endif %}

    <hr>

    <!--  Longest Duration -->
    <h3>Airport with Longest Duration</h3>
    {% if longest %}
        <p><b>{{ longest.airport_code }}</b> - {{ longest.duration }} min</p>
    {% endif %}

    <hr>

    <!--Shortest Duration -->
    <h3>Airport with Shortest Duration </h3>
    {% if shortest %}
        <p><b>{{ shortest.airport_code }}</b> - {{ shortest.duration }} min</p>
    {% endif %}

    <hr>

    <br>
    <a href="/add/">Add New Route</a>

    <form method="post" action="{% url 'clear_tree' %}" style="margin-top:20px;">
    {% csrf_token %}
    <button type="submit" onclick="return confirm('Are you sure you want to delete all airport routes?');">Clear All Tree Data</button>
</form>

</body>
</html>